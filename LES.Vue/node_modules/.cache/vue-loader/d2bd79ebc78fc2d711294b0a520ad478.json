{"remainingRequest":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\src\\components\\SearchForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\src\\components\\SearchForm.vue","mtime":1612254337304},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport formItem from './FormItem'\r\nimport { createUUID } from '../../util/tools'\r\n\r\nexport default {\r\n  components: { formItem },\r\n  props: {\r\n    //通用查询配置\r\n    commonSearchOptionSet: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    controlStyle: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    drawerSize: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    //接受父组件传过来的值\r\n    labelWidth: { // 显示label的宽度\r\n      type: String,\r\n      required: true,\r\n    },\r\n    //子搜索组件传递的显示内容\r\n    searchFormInputPlaceholder: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    //子搜索组件传递的属性名\r\n    searchFormInputAttrs: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    /**\r\n     * 表单配置\r\n     * 示例：\r\n     * [{\r\n     *   label: '用户名', // label文字\r\n     *   prop: 'username', // 字段名\r\n     *   element: 'el-input', // 指定elementui组件\r\n     *   initValue: '阿黄', // 字段初始值\r\n     *   placeholder: '请输入用户名', // elementui组件属性\r\n     *   rules: [{ required: true, message: '必填项', trigger: 'blur' }], // elementui组件属性\r\n     *   events: { // elementui组件方法\r\n     *     input (val) {\r\n     *       console.log(val)\r\n     *     },\r\n     *     ...... // 可添加任意elementui组件支持的方法\r\n     *   }\r\n     *   ...... // 可添加任意elementui组件支持的属性\r\n     * }]\r\n     */\r\n    formOptions: {\r\n      type: Array,\r\n      required: true,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    // 提交按钮项，多个用逗号分隔（search, export, reset）\r\n    btnItems: {\r\n      type: String,\r\n      default () {\r\n        return 'search,reset'\r\n      }\r\n    },\r\n    buttonList: {}\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      drawer: false,\r\n      direction: 'rtl',\r\n      //表单form对象\r\n      formData: {\r\n      },\r\n      commonSearchOptions: [\r\n        {\r\n          value: '1',\r\n          label: '模糊'\r\n        },\r\n        {\r\n          value: '2',\r\n          label: '精准'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    newKeys () {\r\n      return this.formOptions.map(v => {\r\n        return createUUID()\r\n      })\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.addInitValue()\r\n  },\r\n\r\n  methods: {\r\n    // 是否显示高级搜索框\r\n    showHighFilter () {\r\n      this.drawer = !this.drawer\r\n    },\r\n    // 校验\r\n    onValidate (callback) {\r\n      this.$refs.formRef.validate(valid => {\r\n        if (valid) {\r\n          console.log('提交成功')\r\n          console.log(this.formData)\r\n          callback()\r\n        }\r\n      })\r\n    },\r\n    // 搜索\r\n    onSearch () {\r\n      this.onValidate(() => {\r\n        this.$emit('onSearch', this.formData)\r\n      })\r\n    },\r\n    // 导出\r\n    onExport () {\r\n      this.onValidate(() => {\r\n        this.$emit('onExport', this.formData)\r\n      })\r\n    },\r\n    // 重置\r\n    onReset () {\r\n      //重置 高级选线中的通用筛选框\r\n      //因为SonFormItem有多项，因此是一个数组！！！\r\n      //debugger\r\n      if (this.$refs.SonFormItem != undefined) {\r\n        this.$refs.SonFormItem.forEach(x => {\r\n          //调用子组件的方法\r\n          x.resetCommonFitler()\r\n        })\r\n      }\r\n\r\n      this.$refs.formRef.resetFields()\r\n      //一些公共的值赋初始值\r\n      this.formData.searchVal = ''\r\n      this.formData.searchVal_FilterMode = '1' //默认是 模糊查询\r\n      if (this.commonSearchOptionSet == '精准') {\r\n        this.formData.searchVal_FilterMode = '2'\r\n      }\r\n      this.formData.searchFormInputAttrs = this.searchFormInputAttrs\r\n    },\r\n    // 添加初始值\r\n    addInitValue () {\r\n      const obj = {}\r\n      this.formOptions.forEach(v => {\r\n        if (v.initValue !== undefined) {\r\n          obj[v.prop] = v.initValue\r\n        } else {\r\n          obj[v.prop] = '' //注意：初始的时候，必须form对象中的每个属性都赋初始值，否则会导致在【重置】按钮后，输入值输入不上的问题，即绑定脱绑问题\r\n        }\r\n      })\r\n      obj.searchVal_FilterMode = '1' //默认是 模糊查询\r\n      if (this.commonSearchOptionSet == '精准') {\r\n        obj.searchVal_FilterMode = '2'\r\n      }\r\n      obj.searchFormInputAttrs = this.searchFormInputAttrs\r\n      obj.searchVal = ''\r\n      //debugger\r\n      this.formData = obj\r\n    },\r\n    getFormData () {\r\n      //debugger\r\n      return this.formData\r\n    },\r\n    setNewFormOptions (new_formOptions) {\r\n      this.formOptions = new_formOptions\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n",{"version":3,"sources":["SearchForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA","file":"SearchForm.vue","sourceRoot":"src\\components","sourcesContent":["/**\r\n * 搜索栏公共组件\r\n */\r\n<template>\r\n  <div class=\"search-form-box\">\r\n    <el-form :model=\"formData\"\r\n             :label-width=\"labelWidth\"\r\n             ref=\"formRef\"\r\n             size=\"small\"\r\n             :inline=\"true\">\r\n\r\n      <el-form-item>\r\n        <el-input v-model=\"formData.searchVal\"\r\n                  size=\"small\"\r\n                  class=\"searchClass\"\r\n                  :placeholder=\"searchFormInputPlaceholder\">\r\n          <div slot=\"prepend\">\r\n            <div class=\"centerClass\">\r\n              <el-select v-model=\"formData.searchVal_FilterMode\"\r\n                         placeholder=\"请选择\"\r\n                         size=\"small\"\r\n                         style=\"width: 90px\">\r\n                <el-option v-for=\"item in commonSearchOptions\"\r\n                           :key=\"item.value\"\r\n                           :label=\"item.label\"\r\n                           :value=\"item.value\">\r\n                </el-option>\r\n              </el-select>\r\n            </div>\r\n          </div>\r\n        </el-input>\r\n\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"\">\r\n        <el-button v-if=\"btnItems.includes('search')\"\r\n                   type=\"primary\"\r\n                   class=\"btn-search\"\r\n                   icon=\"el-icon-search\"\r\n                   size=\"small\"\r\n                   @click=\"onSearch\">查询</el-button>\r\n        &nbsp;\r\n        <el-link v-if=\"btnItems.includes('reset')\"\r\n                 :underline=\"false\"\r\n                 type=\"primary\"\r\n                 class=\"btn-reset\"\r\n                 @click=\"onReset\">重置</el-link>\r\n        &nbsp;\r\n        <el-link type=\"primary\"\r\n                 @click=\"showHighFilter\"\r\n                 :underline=\"false\">高级</el-link>\r\n        <el-drawer style=\"top:140px;height:520px;\"\r\n                   :modal=\"false\"\r\n                   :withHeader=\"false\"\r\n                   :size=\"drawerSize\"\r\n                   :close-on-press-escape=\"true\"\r\n                   :show-close=\"false\"\r\n                   :visible.sync=\"drawer\"\r\n                   :direction=\"direction\">\r\n          <div class=\"popup-right\">\r\n            <div slot=\"header\"\r\n                 class=\"drawer_header\">高级查询</div>\r\n            <div class=\"drawer_main\"\r\n                 style=\"height:auto;margin:10px 5px 15px 20px;\">\r\n              <el-scrollbar :noresize=\"false\"\r\n                            :native=\"false\"\r\n                            wrap-class=\"scrollbar-wrap\">\r\n                <el-form-item v-for=\"(item, index) in formOptions\"\r\n                              :key=\"newKeys[index]\"\r\n                              :prop=\"item.prop\"\r\n                              class=\"searchFormCss\"\r\n                              style=\"height:auto;margin:10px 5px 15px 20px;\"\r\n                              :label=\"item.label ? (item.label + '：') : ''\"\r\n                              :rules=\"item.rules\">\r\n                  <formItem ref=\"SonFormItem\"\r\n                            v-model=\"formData[item.prop]\"\r\n                            :currentValMode=\"formData[item.prop+'_FilterMode']\"\r\n                            @currentValModeInput=\"valueMode => { formData[item.prop+'_FilterMode'] = valueMode }\"\r\n                            :controlStyle=\"controlStyle\"\r\n                            :itemOptions=\"item\" />\r\n                </el-form-item>\r\n              </el-scrollbar>\r\n            </div>\r\n            <div slot=\"footer\"\r\n                 class=\"drawer_footer\">\r\n              <el-button class=\"left\"\r\n                         type=\"text\"\r\n                         size=\"small\"\r\n                         @click=\"drawer=false\">收回</el-button>\r\n              <el-button class=\"right\"\r\n                         icon=\"el-icon-refresh-left\"\r\n                         size=\"small\"\r\n                         @click=\"onReset\">重置</el-button>\r\n              <el-button class=\"right\"\r\n                         type=\"primary\"\r\n                         icon=\"el-icon-search\"\r\n                         size=\"small\"\r\n                         @click=\"onSearch\">查询</el-button>\r\n            </div>\r\n          </div>\r\n        </el-drawer>\r\n      </el-form-item>\r\n\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport formItem from './FormItem'\r\nimport { createUUID } from '../../util/tools'\r\n\r\nexport default {\r\n  components: { formItem },\r\n  props: {\r\n    //通用查询配置\r\n    commonSearchOptionSet: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    controlStyle: {\r\n      type: Object,\r\n      required: true,\r\n    },\r\n    drawerSize: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    //接受父组件传过来的值\r\n    labelWidth: { // 显示label的宽度\r\n      type: String,\r\n      required: true,\r\n    },\r\n    //子搜索组件传递的显示内容\r\n    searchFormInputPlaceholder: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    //子搜索组件传递的属性名\r\n    searchFormInputAttrs: {\r\n      type: Array,\r\n      required: true,\r\n    },\r\n    /**\r\n     * 表单配置\r\n     * 示例：\r\n     * [{\r\n     *   label: '用户名', // label文字\r\n     *   prop: 'username', // 字段名\r\n     *   element: 'el-input', // 指定elementui组件\r\n     *   initValue: '阿黄', // 字段初始值\r\n     *   placeholder: '请输入用户名', // elementui组件属性\r\n     *   rules: [{ required: true, message: '必填项', trigger: 'blur' }], // elementui组件属性\r\n     *   events: { // elementui组件方法\r\n     *     input (val) {\r\n     *       console.log(val)\r\n     *     },\r\n     *     ...... // 可添加任意elementui组件支持的方法\r\n     *   }\r\n     *   ...... // 可添加任意elementui组件支持的属性\r\n     * }]\r\n     */\r\n    formOptions: {\r\n      type: Array,\r\n      required: true,\r\n      default () {\r\n        return []\r\n      }\r\n    },\r\n    // 提交按钮项，多个用逗号分隔（search, export, reset）\r\n    btnItems: {\r\n      type: String,\r\n      default () {\r\n        return 'search,reset'\r\n      }\r\n    },\r\n    buttonList: {}\r\n  },\r\n\r\n  data () {\r\n    return {\r\n      drawer: false,\r\n      direction: 'rtl',\r\n      //表单form对象\r\n      formData: {\r\n      },\r\n      commonSearchOptions: [\r\n        {\r\n          value: '1',\r\n          label: '模糊'\r\n        },\r\n        {\r\n          value: '2',\r\n          label: '精准'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    newKeys () {\r\n      return this.formOptions.map(v => {\r\n        return createUUID()\r\n      })\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.addInitValue()\r\n  },\r\n\r\n  methods: {\r\n    // 是否显示高级搜索框\r\n    showHighFilter () {\r\n      this.drawer = !this.drawer\r\n    },\r\n    // 校验\r\n    onValidate (callback) {\r\n      this.$refs.formRef.validate(valid => {\r\n        if (valid) {\r\n          console.log('提交成功')\r\n          console.log(this.formData)\r\n          callback()\r\n        }\r\n      })\r\n    },\r\n    // 搜索\r\n    onSearch () {\r\n      this.onValidate(() => {\r\n        this.$emit('onSearch', this.formData)\r\n      })\r\n    },\r\n    // 导出\r\n    onExport () {\r\n      this.onValidate(() => {\r\n        this.$emit('onExport', this.formData)\r\n      })\r\n    },\r\n    // 重置\r\n    onReset () {\r\n      //重置 高级选线中的通用筛选框\r\n      //因为SonFormItem有多项，因此是一个数组！！！\r\n      //debugger\r\n      if (this.$refs.SonFormItem != undefined) {\r\n        this.$refs.SonFormItem.forEach(x => {\r\n          //调用子组件的方法\r\n          x.resetCommonFitler()\r\n        })\r\n      }\r\n\r\n      this.$refs.formRef.resetFields()\r\n      //一些公共的值赋初始值\r\n      this.formData.searchVal = ''\r\n      this.formData.searchVal_FilterMode = '1' //默认是 模糊查询\r\n      if (this.commonSearchOptionSet == '精准') {\r\n        this.formData.searchVal_FilterMode = '2'\r\n      }\r\n      this.formData.searchFormInputAttrs = this.searchFormInputAttrs\r\n    },\r\n    // 添加初始值\r\n    addInitValue () {\r\n      const obj = {}\r\n      this.formOptions.forEach(v => {\r\n        if (v.initValue !== undefined) {\r\n          obj[v.prop] = v.initValue\r\n        } else {\r\n          obj[v.prop] = '' //注意：初始的时候，必须form对象中的每个属性都赋初始值，否则会导致在【重置】按钮后，输入值输入不上的问题，即绑定脱绑问题\r\n        }\r\n      })\r\n      obj.searchVal_FilterMode = '1' //默认是 模糊查询\r\n      if (this.commonSearchOptionSet == '精准') {\r\n        obj.searchVal_FilterMode = '2'\r\n      }\r\n      obj.searchFormInputAttrs = this.searchFormInputAttrs\r\n      obj.searchVal = ''\r\n      //debugger\r\n      this.formData = obj\r\n    },\r\n    getFormData () {\r\n      //debugger\r\n      return this.formData\r\n    },\r\n    setNewFormOptions (new_formOptions) {\r\n      this.formOptions = new_formOptions\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n.el-select .el-input {\r\n  width: 130px;\r\n}\r\n.input-with-select .el-input-group__prepend {\r\n  background-color: #fff;\r\n}\r\n.searchClass {\r\n  //border: 1px solid #c5c5c5;\r\n  border-radius: 20px;\r\n  background: #f4f4f4;\r\n  margin-top: 1px;\r\n}\r\n.searchClass .el-input-group__prepend {\r\n  border: none;\r\n  background-color: transparent;\r\n  padding: 0 10px 0 30px;\r\n}\r\n.searchClass .el-input-group__append {\r\n  border: none;\r\n  background-color: transparent;\r\n}\r\n.searchClass .el-input__inner {\r\n  height: 36px;\r\n  line-height: 36px;\r\n  border: none;\r\n  background-color: transparent;\r\n}\r\n.searchClass .el-icon-search {\r\n  font-size: 16px;\r\n}\r\n.searchClass .centerClass {\r\n  height: 100%;\r\n  line-height: 100%;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  text-align: right;\r\n}\r\n.searchClass .line {\r\n  width: 1px;\r\n  height: 26px;\r\n  background-color: #c5c5c5;\r\n  margin-left: 14px;\r\n}\r\n.searchClass:hover {\r\n  //border: 1px solid #d5e3e8;\r\n  background: #fff;\r\n}\r\n.searchClass:hover .line {\r\n  background-color: #d5e3e8;\r\n}\r\n.searchClass:hover .el-icon-search {\r\n  color: #409eff;\r\n  font-size: 16px;\r\n}\r\n\r\n.searchFormCss {\r\n  font-weight: 700;\r\n  color: #606266;\r\n}\r\n.search-form-box {\r\n  float: right;\r\n  display: flex;\r\n  margin-bottom: 0px;\r\n  margin-top: 5px;\r\n\r\n  .btn-box {\r\n    padding-top: 5px;\r\n    display: flex;\r\n\r\n    button {\r\n      height: 28px;\r\n    }\r\n  }\r\n  .el-form {\r\n    /deep/ .el-form-item__label {\r\n      padding-right: 0;\r\n    }\r\n    .el-form-item {\r\n      margin-bottom: 0;\r\n\r\n      &.is-error {\r\n        margin-bottom: 22px;\r\n      }\r\n    }\r\n    // el-input宽度\r\n    /deep/ .form-item {\r\n      > .el-input:not(.el-date-editor) {\r\n        width: 120px;\r\n      }\r\n    }\r\n    /deep/ .el-select {\r\n      width: 120px;\r\n    }\r\n    /deep/ .el-cascader {\r\n      width: 200px;\r\n    }\r\n  }\r\n}\r\n.popup-right {\r\n  text-align: left;\r\n  line-height: 1.2;\r\n  z-index: 1000;\r\n  .drawer_header {\r\n    background-color: #f6f6f6;\r\n    line-height: 1.2;\r\n    padding: 10px;\r\n    font-size: 14px;\r\n  }\r\n  .drawer_main {\r\n    background-color: #fff;\r\n    padding: 0;\r\n    max-height: 495px;\r\n    min-height: 400px;\r\n    /deep/ .el-scrollbar {\r\n      height: 395px;\r\n    }\r\n    /deep/ .scrollbar-wrap {\r\n      max-height: 410px;\r\n      overflow-x: hidden;\r\n      .el-form {\r\n        padding: 10px;\r\n        .el-form-item {\r\n          margin-bottom: 10px;\r\n          .el-date-editor .el-range-separator {\r\n            width: 25px;\r\n          }\r\n          /deep/ .operator .el-input__inner {\r\n            padding-left: 5px;\r\n            padding-right: 20px;\r\n            text-align: center;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .drawer_footer {\r\n    background-color: #f6f6f6;\r\n    padding: 13px;\r\n    overflow: hidden;\r\n    .left {\r\n      float: left;\r\n    }\r\n    .right {\r\n      float: right;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n"]}]}