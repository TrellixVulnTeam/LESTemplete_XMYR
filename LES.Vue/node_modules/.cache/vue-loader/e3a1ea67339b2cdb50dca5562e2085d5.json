{"remainingRequest":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\src\\views\\System\\My.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\src\\views\\System\\My.vue","mtime":1610332596000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\Blog.Admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 120px;\n  height: 120px;\n  text-align: center;\n}\n.plus-sign{\n  line-height: 120px !important;\n}\n.avatar {\n  width: 120px;\n  height: 120px;\n  display: block;\n}\n\n.markdown-body{\n  height: 500px !important;\n}\n",{"version":3,"sources":["My.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+IA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"My.vue","sourceRoot":"src\\views\\System","sourcesContent":["<template>\n  <el-form\n    ref=\"editForm\"\n    :model=\"editForm\"\n    label-width=\"80px\"\n    @submit.prevent=\"onSubmit\"\n    style=\"margin:20px;width:60%;min-width:600px;\"\n  >\n    <el-form-item label=\"我的昵称\">\n      <el-input v-model=\"editForm.uRealName\"></el-input>\n    </el-form-item>\n\n    <el-form-item label=\"旧密码\" prop=\"uLoginPWD\">\n      <el-input v-model=\"editForm.uLoginPWD\" type=\"text\" auto-complete=\"off\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"新密码\" prop=\"uLoginPWDNew\">\n      <el-input v-model=\"editForm.uLoginPWDNew\" show-password auto-complete=\"off\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"确认密码\" prop=\"uLoginPWDConfirm\">\n      <el-input v-model=\"editForm.uLoginPWDConfirm\" show-password auto-complete=\"off\"></el-input>\n    </el-form-item>\n\n    <el-form-item label=\"头像\">\n      <el-upload\n        class=\"avatar-uploader\"\n        action=\"/images/Upload/Pic\"\n        :show-file-list=\"false\"\n        :headers=\"token\"\n        :data=\"ruleForm\"\n        :on-success=\"handleAvatarSuccess\"\n        :before-upload=\"beforeAvatarUpload\"\n      >\n        <img v-if=\"editForm.tdLogo\" :src=\"editForm.tdLogo\" class=\"avatar\" />\n        <i v-else class=\"el-icon-plus avatar-uploader-icon plus-sign\"></i>\n      </el-upload>\n    </el-form-item>\n\n    <el-form-item label=\"留言/备注\">\n      <el-input type=\"textarea\" v-model=\"editForm.desc\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button @click=\"onSubmit\" type=\"primary\">更新</el-button>\n      <el-button @click.native.prevent>取消</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      editForm: {\n        id: 0,\n        uID: 0,\n        RID: 0,\n        uLoginName: \"\",\n        uRealName: \"\",\n        name: \"\",\n        sex: -1,\n        age: 0,\n        birth: \"\",\n        desc: \"\",\n        addr: \"\",\n        tdLogo: \"\"\n      },\n      token: {\n        Authorization: \"Bearer \"\n      },\n      ruleForm: {\n        max_ver: \"\",\n        min_ver: \"\",\n        enable: \"\"\n      },\n      beforeAvatarUpload(file) {\n        const isJPG = file.type === \"image/jpeg\";\n        const isLt1M = file.size / 1024 / 1024 < 1;\n\n        // if (!isJPG) {\n        //   this.$message.error('上传头像图片只能是 JPG 格式!')\n        // }\n        if (!isLt1M) {\n          this.$message.error(\"上传头像图片大小不能超过 1MB!\");\n        }\n        return isLt1M;\n      }\n    };\n  },\n  methods: {\n    onSubmit() {\n      this.$message({\n        message: \"失败！该操作无权限\",\n        type: \"error\"\n      });\n    },\n    handleAvatarSuccess(res, file) {\n      this.editForm.tdLogo = \"/\" + res.response;\n    },\n    fileDownload () {\n        let self=this\n        let token = \"132465\"\n        // 将token放到头中，设置下载进度、请求参数、返回类型\n        axios({\n            url: '/images/Down/Bmd?filename='+self.rulesForm.data.ItemBmdPath,\n            method: 'get',\n            headers: { 'FileToken': token },\n            onDownloadProgress: p => {\n                // this.precent = Math.floor(100 * (p.loaded / p.total))\n            },\n            responseType: 'blob'\n        }).then(data => {\n            // 如果后端用encodeURI对文件名进行了编码，前端需用decodeURI进行解码（主要为处理特殊字符）\n            let fileName = decodeURI(data.headers.filename)\n            // 由于ie不支持download属性，故需要做兼容判断\n            if (navigator.appVersion.toString().indexOf('.NET') > 0) {\n                // ie独有的msSaveBlob属性，data.data为Blob文件流\n                window.navigator.msSaveBlob(data.data, fileName)\n            } else {\n                // 以下流程即为文章开始的下载流程\n                let url = window.URL.createObjectURL(data.data)\n                let link = document.createElement('a')\n                link.style.display = 'none'\n                link.href = url\n                link.download = fileName\n                document.body.appendChild(link)\n                link.click()\n                window.URL.revokeObjectURL(link.href);\n            }\n        })\n    }\n  },\n  mounted() {\n    let tokenStr = window.localStorage.Token;\n    this.token = {\n      Authorization: \"Bearer \" + tokenStr\n    };\n\n    var user = JSON.parse(window.localStorage.user);\n    this.editForm.uRealName = user ? user.uRealName : \"\";\n  }\n};\n</script>\n\n<style>\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 120px;\n    height: 120px;\n    text-align: center;\n  }\n  .plus-sign{\n    line-height: 120px !important;\n  }\n  .avatar {\n    width: 120px;\n    height: 120px;\n    display: block;\n  }\n\n  .markdown-body{\n    height: 500px !important;\n  }\n</style>"]}]}