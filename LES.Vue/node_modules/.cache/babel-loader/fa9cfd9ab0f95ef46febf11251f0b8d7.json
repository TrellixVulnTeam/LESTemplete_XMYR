{"remainingRequest":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\babel-loader\\lib\\index.js!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\src\\views\\System\\My.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\src\\views\\System\\My.vue","mtime":1612162898551},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport _Object$assign from \"D:\\\\\\u6570\\u701B\\u4FE1\\u606F\\u79D1\\u6280\\\\\\u516C\\u53F8\\u9879\\u76EE\\\\\\u5E7F\\u5DDE\\u897F\\u95E8\\u5B50\\u539F\\u6750\\u6599\\u7ACB\\u4F53\\u5E93\\\\\\u4F4E\\u538B\\u7EBF\\u5708\\\\src\\\\LES.Vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/object/assign\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { md5Password, updatePerson, uploadPicUrl, removePic } from '../../api/api';\nexport default {\n  data: function data() {\n    return {\n      uploadPicUrl: uploadPicUrl,\n      editForm: {\n        isUpdatePWD: false,\n        //是否需要修改密码\n        uRemark: \"\",\n        id: 0,\n        uID: 0,\n        RID: 0,\n        uLoginName: \"\",\n        uRealName: \"\",\n        name: \"\",\n        sex: -1,\n        age: 0,\n        birth: \"\",\n        desc: \"\",\n        addr: \"\",\n        tdLogo: \"\" //头像地址\n\n      },\n      token: {\n        Authorization: \"Bearer \"\n      },\n      ruleForm: {\n        max_ver: \"\",\n        min_ver: \"\",\n        enable: \"\"\n      },\n      beforeAvatarUpload: function beforeAvatarUpload(file) {\n        var isJPG = file.type === \"image/jpeg\";\n        var isLt1M = file.size / 1024 / 1024 < 1; // if (!isJPG) {\n        //   this.$message.error('上传头像图片只能是 JPG 格式!')\n        // }\n\n        if (!isLt1M) {\n          this.$message.error(\"上传头像图片大小不能超过 1MB!\");\n        }\n\n        return isLt1M;\n      }\n    };\n  },\n  methods: {\n    //删除图片\n    removeLogo: function removeLogo() {\n      var _this = this;\n\n      var para = {\n        path: this.editForm.tdLogo\n      };\n      removePic(para).then(function (res) {\n        if (res.data.success) {\n          _this.editForm.tdLogo = '';\n\n          _this.$message({\n            message: '移除头像成功！',\n            type: 'success'\n          });\n        } else {\n          _this.$message({\n            message: res.data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    onSubmit: function onSubmit() {\n      var _this2 = this;\n\n      var myEditForm = this.editForm;\n\n      if (!(myEditForm.uLoginPWDNew == undefined || myEditForm.uLoginPWDNew == '') && (myEditForm.uLoginPWDConfirm == undefined || myEditForm.uLoginPWDConfirm == '')) {\n        //只有都为空的时候，才认为不修改密码\n        if (myEditForm.uLoginPWDNew == undefined || myEditForm.uLoginPWDNew == '') {\n          this.$message({\n            message: \"验证失败！新密码不能为空\",\n            type: \"error\"\n          });\n          return;\n        } //验证新密码和确认密码是否一致\n\n\n        if (myEditForm.uLoginPWDNew != myEditForm.uLoginPWDConfirm) {\n          this.$message({\n            message: \"验证失败！新密码和确认密码不相同\",\n            type: \"error\"\n          });\n          return;\n        }\n\n        this.editForm.isUpdatePWD = true;\n        var para = {\n          password: this.editForm.uLoginPWD\n        };\n        md5Password(para).then(function (res) {\n          var user = JSON.parse(window.localStorage.user);\n\n          if (res != user.uLoginPWD) {\n            _this2.$message({\n              message: \"验证失败！旧密码不正确\",\n              type: \"error\"\n            });\n\n            return;\n          } //密码验证成功后\n\n\n          var para = _Object$assign({}, _this2.editForm);\n\n          updatePerson(para).then(function (res) {\n            if (res.data.success) {\n              _this2.$message({\n                message: res.data.msg + ',请重新登录',\n                type: 'success'\n              });\n            } else {\n              _this2.$message({\n                message: res.data.msg,\n                type: 'error'\n              });\n            }\n          });\n        });\n      } else {\n        //不修改密码\n        this.editForm.isUpdatePWD = false;\n\n        var _para = _Object$assign({}, this.editForm);\n\n        updatePerson(_para).then(function (res) {\n          if (res.data.success) {\n            _this2.$message({\n              message: res.data.msg + ',请重新登录',\n              type: 'success'\n            });\n          } else {\n            _this2.$message({\n              message: res.data.msg,\n              type: 'error'\n            });\n          }\n        });\n      }\n    },\n    handleAvatarSuccess: function handleAvatarSuccess(res, file) {\n      this.editForm.tdLogo = \"/\" + res.response;\n    },\n    fileDownload: function fileDownload() {\n      var self = this;\n      var token = \"132465\"; // 将token放到头中，设置下载进度、请求参数、返回类型\n\n      axios({\n        url: '/images/Down/Bmd?filename=' + self.rulesForm.data.ItemBmdPath,\n        method: 'get',\n        headers: {\n          'FileToken': token\n        },\n        onDownloadProgress: function onDownloadProgress(p) {// this.precent = Math.floor(100 * (p.loaded / p.total))\n        },\n        responseType: 'blob'\n      }).then(function (data) {\n        // 如果后端用encodeURI对文件名进行了编码，前端需用decodeURI进行解码（主要为处理特殊字符）\n        var fileName = decodeURI(data.headers.filename); // 由于ie不支持download属性，故需要做兼容判断\n\n        if (navigator.appVersion.toString().indexOf('.NET') > 0) {\n          // ie独有的msSaveBlob属性，data.data为Blob文件流\n          window.navigator.msSaveBlob(data.data, fileName);\n        } else {\n          // 以下流程即为文章开始的下载流程\n          var url = window.URL.createObjectURL(data.data);\n          var link = document.createElement('a');\n          link.style.display = 'none';\n          link.href = url;\n          link.download = fileName;\n          document.body.appendChild(link);\n          link.click();\n          window.URL.revokeObjectURL(link.href);\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    var tokenStr = window.localStorage.Token;\n    this.token = {\n      Authorization: \"Bearer \" + tokenStr\n    };\n    var user = JSON.parse(window.localStorage.user);\n    console.log(user);\n    this.editForm.uRealName = user ? user.uRealName : \"\";\n    this.editForm.uRemark = user ? user.uRemark : \"\";\n    this.editForm.uID = user ? user.uID : \"\";\n    this.editForm.tdLogo = user ? user.tdLogo : \"\";\n  }\n};",{"version":3,"sources":["My.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-form ref=\"editForm\"\n           :model=\"editForm\"\n           label-width=\"80px\"\n           @submit.prevent=\"onSubmit\"\n           style=\"margin:20px;width:60%;min-width:600px;height:1000px;\">\n    <el-form-item label=\"我的昵称\">\n      <el-input v-model=\"editForm.uRealName\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"旧密码\"\n                  prop=\"uLoginPWD\">\n      <el-input v-model=\"editForm.uLoginPWD\"\n                show-password\n                auto-complete=\"off\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"新密码\"\n                  prop=\"uLoginPWDNew\">\n      <el-input v-model=\"editForm.uLoginPWDNew\"\n                show-password\n                auto-complete=\"off\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"确认密码\"\n                  prop=\"uLoginPWDConfirm\">\n      <el-input v-model=\"editForm.uLoginPWDConfirm\"\n                show-password\n                auto-complete=\"off\"></el-input>\n    </el-form-item>\n\n    <el-form-item label=\"头像\">\n      <el-upload class=\"avatar-uploader\"\n                 :action=\"uploadPicUrl\"\n                 :show-file-list=\"false\"\n                 :headers=\"token\"\n                 :data=\"ruleForm\"\n                 :on-success=\"handleAvatarSuccess\"\n                 :before-upload=\"beforeAvatarUpload\">\n        <img v-if=\"editForm.tdLogo\"\n             :src=\"editForm.tdLogo\"\n             class=\"avatar\" />\n        <i v-else\n           class=\"el-icon-plus avatar-uploader-icon plus-sign\"></i>\n      </el-upload>\n      <el-button type=\"danger\"\n                 @click=\"removeLogo\">移除头像</el-button>\n    </el-form-item>\n\n    <el-form-item label=\"备注\"\n                  prop=\"uRemark\">\n      <el-input type=\"textarea\"\n                auto-complete=\"off\"\n                v-model=\"editForm.uRemark\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button @click=\"onSubmit\"\n                 type=\"primary\">更新</el-button>\n      <el-button @click.native.prevent>取消</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\n\nimport { md5Password, updatePerson, uploadPicUrl, removePic } from '../../api/api';\n\nexport default {\n  data () {\n    return {\n      uploadPicUrl: uploadPicUrl,\n      editForm: {\n        isUpdatePWD: false,//是否需要修改密码\n        uRemark: \"\",\n        id: 0,\n        uID: 0,\n        RID: 0,\n        uLoginName: \"\",\n        uRealName: \"\",\n        name: \"\",\n        sex: -1,\n        age: 0,\n        birth: \"\",\n        desc: \"\",\n        addr: \"\",\n        tdLogo: \"\" //头像地址\n      },\n      token: {\n        Authorization: \"Bearer \"\n      },\n      ruleForm: {\n        max_ver: \"\",\n        min_ver: \"\",\n        enable: \"\"\n      },\n      beforeAvatarUpload (file) {\n        const isJPG = file.type === \"image/jpeg\";\n        const isLt1M = file.size / 1024 / 1024 < 1;\n\n        // if (!isJPG) {\n        //   this.$message.error('上传头像图片只能是 JPG 格式!')\n        // }\n        if (!isLt1M) {\n          this.$message.error(\"上传头像图片大小不能超过 1MB!\");\n        }\n        return isLt1M;\n      }\n    };\n  },\n  methods: {\n    //删除图片\n    removeLogo () {\n      let para = {\n        path: this.editForm.tdLogo\n      };\n      removePic(para).then((res) => {\n        if (res.data.success) {\n          this.editForm.tdLogo = ''\n          this.$message({\n            message: '移除头像成功！',\n            type: 'success'\n          });\n        }\n        else {\n          this.$message({\n            message: res.data.msg,\n            type: 'error'\n          });\n        }\n      });\n\n    },\n    onSubmit () {\n      let myEditForm = this.editForm\n      if (!(myEditForm.uLoginPWDNew == undefined || myEditForm.uLoginPWDNew == '')\n        && (myEditForm.uLoginPWDConfirm == undefined || myEditForm.uLoginPWDConfirm == '')) {\n        //只有都为空的时候，才认为不修改密码\n        if (myEditForm.uLoginPWDNew == undefined || myEditForm.uLoginPWDNew == '') {\n          this.$message({\n            message: \"验证失败！新密码不能为空\",\n            type: \"error\"\n          });\n          return;\n        }\n        //验证新密码和确认密码是否一致\n        if (myEditForm.uLoginPWDNew != myEditForm.uLoginPWDConfirm) {\n          this.$message({\n            message: \"验证失败！新密码和确认密码不相同\",\n            type: \"error\"\n          });\n          return;\n        }\n        this.editForm.isUpdatePWD = true;\n        let para = {\n          password: this.editForm.uLoginPWD\n        }\n        md5Password(para).then((res) => {\n          var user = JSON.parse(window.localStorage.user);\n          if (res != user.uLoginPWD) {\n            this.$message({\n              message: \"验证失败！旧密码不正确\",\n              type: \"error\"\n            });\n            return;\n          }\n          //密码验证成功后\n          let para = Object.assign({}, this.editForm);\n          updatePerson(para).then((res) => {\n            if (res.data.success) {\n              this.$message({\n                message: res.data.msg + ',请重新登录',\n                type: 'success'\n              });\n            }\n            else {\n              this.$message({\n                message: res.data.msg,\n                type: 'error'\n              });\n            }\n          });\n        });\n      } else {\n        //不修改密码\n        this.editForm.isUpdatePWD = false;\n        let para = Object.assign({}, this.editForm);\n        updatePerson(para).then((res) => {\n          if (res.data.success) {\n            this.$message({\n              message: res.data.msg + ',请重新登录',\n              type: 'success'\n            });\n          }\n          else {\n            this.$message({\n              message: res.data.msg,\n              type: 'error'\n            });\n          }\n        });\n      }\n    },\n    handleAvatarSuccess (res, file) {\n      this.editForm.tdLogo = \"/\" + res.response;\n    },\n    fileDownload () {\n      let self = this\n      let token = \"132465\"\n      // 将token放到头中，设置下载进度、请求参数、返回类型\n      axios({\n        url: '/images/Down/Bmd?filename=' + self.rulesForm.data.ItemBmdPath,\n        method: 'get',\n        headers: { 'FileToken': token },\n        onDownloadProgress: p => {\n          // this.precent = Math.floor(100 * (p.loaded / p.total))\n        },\n        responseType: 'blob'\n      }).then(data => {\n        // 如果后端用encodeURI对文件名进行了编码，前端需用decodeURI进行解码（主要为处理特殊字符）\n        let fileName = decodeURI(data.headers.filename)\n        // 由于ie不支持download属性，故需要做兼容判断\n        if (navigator.appVersion.toString().indexOf('.NET') > 0) {\n          // ie独有的msSaveBlob属性，data.data为Blob文件流\n          window.navigator.msSaveBlob(data.data, fileName)\n        } else {\n          // 以下流程即为文章开始的下载流程\n          let url = window.URL.createObjectURL(data.data)\n          let link = document.createElement('a')\n          link.style.display = 'none'\n          link.href = url\n          link.download = fileName\n          document.body.appendChild(link)\n          link.click()\n          window.URL.revokeObjectURL(link.href);\n        }\n      })\n    }\n  },\n  mounted () {\n    let tokenStr = window.localStorage.Token;\n    this.token = {\n      Authorization: \"Bearer \" + tokenStr\n    };\n\n    var user = JSON.parse(window.localStorage.user);\n    console.log(user)\n    this.editForm.uRealName = user ? user.uRealName : \"\";\n    this.editForm.uRemark = user ? user.uRemark : \"\";\n    this.editForm.uID = user ? user.uID : \"\";\n    this.editForm.tdLogo = user ? user.tdLogo : \"\";\n  }\n};\n</script>\n\n<style>\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 120px;\n  height: 120px;\n  text-align: center;\n}\n.plus-sign {\n  line-height: 120px !important;\n}\n.avatar {\n  width: 120px;\n  height: 120px;\n  display: block;\n}\n\n.markdown-body {\n  height: 500px !important;\n}\n</style>"],"sourceRoot":"src\\views\\System"}]}