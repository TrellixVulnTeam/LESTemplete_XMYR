{"remainingRequest":"C:\\框架\\Blog.Admin-master\\node_modules\\babel-loader\\lib\\index.js!C:\\框架\\Blog.Admin-master\\src\\api\\api.js","dependencies":[{"path":"C:\\框架\\Blog.Admin-master\\src\\api\\api.js","mtime":1610846853106},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport _Promise from \"C:\\\\\\u6846\\u67B6\\\\Blog.Admin-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\nimport axios from 'axios'; // import router from '../routerManuaConfig'\n\nimport router from '../router/index';\nimport store from \"../store\";\nimport Vue from 'vue';\nimport applicationUserManager from \"../Auth/applicationusermanager\";\nvar base = ''; // 如果是IIS部署，用这个，因为 IIS 只能是 CORS 跨域，不能代理\n// let base = process.env.NODE_ENV==\"production\"? 'http://localhost:8081':'';\n// 请求延时\n\naxios.defaults.timeout = 20000;\nvar storeTemp = store;\naxios.interceptors.request.use(function (config) {\n  var curTime = new Date();\n  var expiretime = new Date(Date.parse(storeTemp.state.tokenExpire));\n\n  if (storeTemp.state.token && curTime < expiretime && storeTemp.state.tokenExpire) {\n    // 判断是否存在token，如果存在的话，则每个http header都加上token\n    config.headers.Authorization = \"Bearer \" + storeTemp.state.token;\n  }\n\n  saveRefreshtime();\n  return config;\n}, function (err) {\n  return _Promise.reject(err);\n}); // http response 拦截器\n\naxios.interceptors.response.use(function (response) {\n  return response;\n}, function (error) {\n  // 超时请求处理\n  var originalRequest = error.config;\n\n  if (error.code == 'ECONNABORTED' && error.message.indexOf('timeout') != -1 && !originalRequest._retry) {\n    Vue.prototype.$message({\n      message: '请求超时！',\n      type: 'error'\n    });\n    originalRequest._retry = true;\n    return null;\n  }\n\n  if (error.response) {\n    if (error.response.status == 401) {\n      var curTime = new Date();\n      var refreshtime = new Date(Date.parse(window.localStorage.refreshtime)); // 在用户操作的活跃期内\n\n      if (window.localStorage.refreshtime && curTime <= refreshtime) {\n        return refreshToken({\n          token: window.localStorage.Token\n        }).then(function (res) {\n          if (res.success) {\n            Vue.prototype.$message({\n              message: 'refreshToken success! loading data...',\n              type: 'success'\n            });\n            store.commit(\"saveToken\", res.response.token);\n            var curTime = new Date();\n            var expiredate = new Date(curTime.setSeconds(curTime.getSeconds() + res.response.expires_in));\n            store.commit(\"saveTokenExpire\", expiredate);\n            error.config.__isRetryRequest = true;\n            error.config.headers.Authorization = 'Bearer ' + res.response.token;\n            return axios(error.config);\n          } else {\n            // 刷新token失败 清除token信息并跳转到登录页面\n            ToLogin();\n          }\n        });\n      } else {\n        // 返回 401，并且不知用户操作活跃期内 清除token信息并跳转到登录页面\n        ToLogin();\n      }\n    } // 403 无权限\n\n\n    if (error.response.status == 403) {\n      Vue.prototype.$message({\n        message: '失败！该操作无权限',\n        type: 'error'\n      });\n      return null;\n    } // 429 ip限流\n\n\n    if (error.response.status == 429) {\n      Vue.prototype.$message({\n        message: '刷新次数过多，请稍事休息重试！',\n        type: 'error'\n      });\n      return null;\n    }\n  }\n\n  return \"\"; // 返回接口返回的错误信息\n});\nexport var BaseApiUrl = base; // 登录\n\nexport var requestLogin = function requestLogin(params) {\n  return axios.get(\"\".concat(base, \"/api/login/jwttoken3.0\"), {\n    params: params\n  }).then(function (res) {\n    return res.data;\n  });\n};\nexport var requestLoginMock = function requestLoginMock(params) {\n  return axios.post(\"\".concat(base, \"/login\"), params).then(function (res) {\n    return res.data;\n  });\n};\nexport var refreshToken = function refreshToken(params) {\n  return axios.get(\"\".concat(base, \"/api/login/RefreshToken\"), {\n    params: params\n  }).then(function (res) {\n    return res.data;\n  });\n};\nexport var saveRefreshtime = function saveRefreshtime(params) {\n  var nowtime = new Date();\n  var lastRefreshtime = window.localStorage.refreshtime ? new Date(window.localStorage.refreshtime) : new Date(-1);\n  var expiretime = new Date(Date.parse(window.localStorage.TokenExpire));\n  var refreshCount = 1; //滑动系数\n\n  if (lastRefreshtime >= nowtime) {\n    lastRefreshtime = nowtime > expiretime ? nowtime : expiretime;\n    lastRefreshtime.setMinutes(lastRefreshtime.getMinutes() + refreshCount);\n    window.localStorage.refreshtime = lastRefreshtime;\n  } else {\n    window.localStorage.refreshtime = new Date(-1);\n  }\n};\n\nvar ToLogin = function ToLogin(params) {\n  store.commit(\"saveToken\", \"\");\n  store.commit(\"saveTokenExpire\", \"\");\n  store.commit(\"saveTagsData\", \"\");\n  window.localStorage.removeItem('user');\n  window.localStorage.removeItem('NavigationBar');\n\n  if (global.IS_IDS4) {\n    applicationUserManager.login();\n  } else {\n    router.replace({\n      path: \"/login\",\n      query: {\n        redirect: router.currentRoute.fullPath\n      }\n    });\n    window.location.reload();\n  }\n};\n\nexport var getUserByToken = function getUserByToken(params) {\n  return axios.get(\"\".concat(base, \"/api/user/getInfoByToken\"), {\n    params: params\n  }).then(function (res) {\n    return res.data;\n  });\n};\nexport function testapi2() {\n  console.log('api is ok.');\n}\nexport var testapi = function testapi(pa) {\n  console.log('api is ok.');\n}; // 用户管理\n\nexport var getUserListPage = function getUserListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/user/get\"), {\n    params: params\n  });\n};\nexport var removeUser = function removeUser(params) {\n  return axios.delete(\"\".concat(base, \"/api/user/delete\"), {\n    params: params\n  });\n};\nexport var editUser = function editUser(params) {\n  return axios.put(\"\".concat(base, \"/api/user/put\"), params);\n};\nexport var addUser = function addUser(params) {\n  return axios.post(\"\".concat(base, \"/api/user/post\"), params);\n};\nexport var batchRemoveUser = function batchRemoveUser(params) {\n  return axios.delete(\"\".concat(base, \"/api/Claims/BatchDelete\"), {\n    params: params\n  }); //没做\n}; // 角色管理\n\nexport var getRoleListPage = function getRoleListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/role/get\"), {\n    params: params\n  });\n};\nexport var removeRole = function removeRole(params) {\n  return axios.delete(\"\".concat(base, \"/api/role/delete\"), {\n    params: params\n  });\n};\nexport var editRole = function editRole(params) {\n  return axios.put(\"\".concat(base, \"/api/role/put\"), params);\n};\nexport var addRole = function addRole(params) {\n  return axios.post(\"\".concat(base, \"/api/role/post\"), params);\n}; // 物料管理\n\nexport var getMaterialListPage = function getMaterialListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/Material/get\"), {\n    params: params\n  });\n};\nexport var removeMaterial = function removeMaterial(params) {\n  return axios.delete(\"\".concat(base, \"/api/Material/delete\"), {\n    params: params\n  });\n};\nexport var editMaterial = function editMaterial(params) {\n  return axios.put(\"\".concat(base, \"/api/Material/put\"), params);\n};\nexport var addMaterial = function addMaterial(params) {\n  return axios.post(\"\".concat(base, \"/api/Material/post\"), params);\n}; // 接口模块管理\n\nexport var getModuleListPage = function getModuleListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/module/get\"), {\n    params: params\n  });\n};\nexport var removeModule = function removeModule(params) {\n  return axios.delete(\"\".concat(base, \"/api/module/delete\"), {\n    params: params\n  });\n};\nexport var editModule = function editModule(params) {\n  return axios.put(\"\".concat(base, \"/api/module/put\"), params);\n};\nexport var addModule = function addModule(params) {\n  return axios.post(\"\".concat(base, \"/api/module/post\"), params);\n}; //在制品查询\n\nexport var getWipHistoryPage = function getWipHistoryPage(params) {\n  return axios.get(\"\".concat(base, \"/api/wip/get\"), {\n    params: params\n  });\n}; // 菜单模块管理\n\nexport var getPermissionListPage = function getPermissionListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/permission/get\"), {\n    params: params\n  });\n};\nexport var getPermissionTreeTable = function getPermissionTreeTable(params) {\n  return axios.get(\"\".concat(base, \"/api/permission/GetTreeTable\"), {\n    params: params\n  });\n};\nexport var removePermission = function removePermission(params) {\n  return axios.delete(\"\".concat(base, \"/api/permission/delete\"), {\n    params: params\n  });\n};\nexport var editPermission = function editPermission(params) {\n  return axios.put(\"\".concat(base, \"/api/permission/put\"), params);\n};\nexport var addPermission = function addPermission(params) {\n  return axios.post(\"\".concat(base, \"/api/permission/post\"), params);\n};\nexport var getPermissionTree = function getPermissionTree(params) {\n  return axios.get(\"\".concat(base, \"/api/permission/getpermissiontree\"), {\n    params: params\n  });\n};\nexport var getPermissionIds = function getPermissionIds(params) {\n  return axios.get(\"\".concat(base, \"/api/permission/GetPermissionIdByRoleId\"), {\n    params: params\n  });\n};\nexport var addRolePermission = function addRolePermission(params) {\n  return axios.post(\"\".concat(base, \"/api/permission/Assign\"), params);\n};\nexport var getNavigationBar = function getNavigationBar(params) {\n  return axios.get(\"\".concat(base, \"/api/permission/GetNavigationBar\"), {\n    params: params\n  }).then(function (res) {\n    return res.data;\n  });\n}; // Bug模块管理\n\nexport var getBugListPage = function getBugListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/TopicDetail/get\"), {\n    params: params\n  });\n};\nexport var removeBug = function removeBug(params) {\n  return axios.delete(\"\".concat(base, \"/api/TopicDetail/delete\"), {\n    params: params\n  });\n};\nexport var editBug = function editBug(params) {\n  return axios.put(\"\".concat(base, \"/api/TopicDetail/update\"), params);\n};\nexport var addBug = function addBug(params) {\n  return axios.post(\"\".concat(base, \"/api/TopicDetail/post\"), params);\n}; // 博客模块管理\n\nexport var getBlogListPage = function getBlogListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/Blog\"), {\n    params: params\n  });\n};\nexport var getBlogDeatil = function getBlogDeatil(params) {\n  return axios.get(\"\".concat(base, \"/api/Blog/DetailNuxtNoPer\"), {\n    params: params\n  });\n};\nexport var editBlog = function editBlog(params) {\n  return axios.put(\"\".concat(base, \"/api/Blog/update\"), params);\n};\nexport var removeBlog = function removeBlog(params) {\n  return axios.delete(\"\".concat(base, \"/api/Blog/delete\"), {\n    params: params\n  });\n}; // 日志\n\nexport var getLogs = function getLogs(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/get\"), {\n    params: params\n  });\n};\nexport var getRequestApiinfoByWeek = function getRequestApiinfoByWeek(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/GetRequestApiinfoByWeek\"), {\n    params: params\n  });\n};\nexport var getAccessApiByDate = function getAccessApiByDate(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/GetAccessApiByDate\"), {\n    params: params\n  });\n};\nexport var getAccessApiByHour = function getAccessApiByHour(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/GetAccessApiByHour\"), {\n    params: params\n  });\n};\nexport var getServerInfo = function getServerInfo(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/Server\"), {\n    params: params\n  });\n};\nexport var getAccessLogs = function getAccessLogs(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/GetAccessLogs\"), {\n    params: params\n  });\n};\nexport var getIds4UsersGrow = function getIds4UsersGrow(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/GetIds4Users\"), {\n    params: params\n  });\n};\nexport var getActiveUsers = function getActiveUsers(params) {\n  return axios.get(\"\".concat(base, \"/api/Monitor/GetActiveUsers\"), {\n    params: params\n  });\n}; // Task管理\n\nexport var getTaskListPage = function getTaskListPage(params) {\n  return axios.get(\"\".concat(base, \"/api/TasksQz/get\"), {\n    params: params\n  });\n};\nexport var removeTask = function removeTask(params) {\n  return axios.delete(\"\".concat(base, \"/api/TasksQz/delete\"), {\n    params: params\n  });\n};\nexport var editTask = function editTask(params) {\n  return axios.put(\"\".concat(base, \"/api/TasksQz/put\"), params);\n};\nexport var addTask = function addTask(params) {\n  return axios.post(\"\".concat(base, \"/api/TasksQz/post\"), params);\n};\nexport var startJob = function startJob(params) {\n  return axios.get(\"\".concat(base, \"/api/TasksQz/StartJob\"), {\n    params: params\n  });\n};\nexport var stopJob = function stopJob(params) {\n  return axios.get(\"\".concat(base, \"/api/TasksQz/StopJob\"), {\n    params: params\n  });\n};\nexport var reCovery = function reCovery(params) {\n  return axios.get(\"\".concat(base, \"/api/TasksQz/ReCovery\"), {\n    params: params\n  });\n}; // ids4\n\nexport var getAchieveUsers_IS4 = function getAchieveUsers_IS4(params) {\n  return axios.get(\"\".concat(base, \"/is4api/GetAchieveUsers\"), {\n    params: params\n  });\n};",{"version":3,"sources":["C:\\框架\\Blog.Admin-master\\src\\api\\api.js"],"names":["axios","router","store","Vue","applicationUserManager","base","defaults","timeout","storeTemp","interceptors","request","use","config","curTime","Date","expiretime","parse","state","tokenExpire","token","headers","Authorization","saveRefreshtime","err","reject","response","error","originalRequest","code","message","indexOf","_retry","prototype","$message","type","status","refreshtime","window","localStorage","refreshToken","Token","then","res","success","commit","expiredate","setSeconds","getSeconds","expires_in","__isRetryRequest","ToLogin","BaseApiUrl","requestLogin","params","get","data","requestLoginMock","post","nowtime","lastRefreshtime","TokenExpire","refreshCount","setMinutes","getMinutes","removeItem","global","IS_IDS4","login","replace","path","query","redirect","currentRoute","fullPath","location","reload","getUserByToken","testapi2","console","log","testapi","pa","getUserListPage","removeUser","delete","editUser","put","addUser","batchRemoveUser","getRoleListPage","removeRole","editRole","addRole","getMaterialListPage","removeMaterial","editMaterial","addMaterial","getModuleListPage","removeModule","editModule","addModule","getWipHistoryPage","getPermissionListPage","getPermissionTreeTable","removePermission","editPermission","addPermission","getPermissionTree","getPermissionIds","addRolePermission","getNavigationBar","getBugListPage","removeBug","editBug","addBug","getBlogListPage","getBlogDeatil","editBlog","removeBlog","getLogs","getRequestApiinfoByWeek","getAccessApiByDate","getAccessApiByHour","getServerInfo","getAccessLogs","getIds4UsersGrow","getActiveUsers","getTaskListPage","removeTask","editTask","addTask","startJob","stopJob","reCovery","getAchieveUsers_IS4"],"mappings":"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","sourcesContent":["import axios from 'axios';\n// import router from '../routerManuaConfig'\nimport router from '../router/index'\nimport store from \"../store\";\nimport Vue from 'vue';\n\nimport applicationUserManager from \"../Auth/applicationusermanager\";\n\nlet base = '';\n// 如果是IIS部署，用这个，因为 IIS 只能是 CORS 跨域，不能代理\n// let base = process.env.NODE_ENV==\"production\"? 'http://localhost:8081':'';\n\n\n// 请求延时\naxios.defaults.timeout = 20000\n\nvar storeTemp = store;\naxios.interceptors.request.use(\n    config => {\n        var curTime = new Date()\n        var expiretime = new Date(Date.parse(storeTemp.state.tokenExpire))\n\n        if (storeTemp.state.token && (curTime < expiretime && storeTemp.state.tokenExpire)) {\n            // 判断是否存在token，如果存在的话，则每个http header都加上token\n            config.headers.Authorization = \"Bearer \" + storeTemp.state.token;\n        }\n\n        saveRefreshtime();\n\n        return config;\n    },\n    err => {\n        return Promise.reject(err);\n    }\n);\n\n// http response 拦截器\naxios.interceptors.response.use(\n    response => {\n        return response;\n    },\n    error => {\n        // 超时请求处理\n        var originalRequest = error.config;\n        if(error.code == 'ECONNABORTED' && error.message.indexOf('timeout')!=-1 && !originalRequest._retry){\n\n            Vue.prototype.$message({\n                message: '请求超时！',\n                type: 'error'\n            });\n\n            originalRequest._retry = true\n            return null;\n        }\n\n        if (error.response) {\n            if (error.response.status == 401) {\n                var curTime = new Date()\n                var refreshtime = new Date(Date.parse(window.localStorage.refreshtime))\n                // 在用户操作的活跃期内\n                if (window.localStorage.refreshtime && (curTime <= refreshtime)) {\n                    return  refreshToken({token: window.localStorage.Token}).then((res) => {\n                        if (res.success) {\n                            Vue.prototype.$message({\n                                message: 'refreshToken success! loading data...',\n                                type: 'success'\n                            });\n\n                            store.commit(\"saveToken\", res.response.token);\n\n                            var curTime = new Date();\n                            var expiredate = new Date(curTime.setSeconds(curTime.getSeconds() + res.response.expires_in));\n                            store.commit(\"saveTokenExpire\", expiredate);\n\n                            error.config.__isRetryRequest = true;\n                            error.config.headers.Authorization = 'Bearer ' + res.response.token;\n                            return axios(error.config);\n                        } else {\n                            // 刷新token失败 清除token信息并跳转到登录页面\n                            ToLogin()\n                        }\n                    });\n                } else {\n                    // 返回 401，并且不知用户操作活跃期内 清除token信息并跳转到登录页面\n                    ToLogin()\n                }\n\n            }\n            // 403 无权限\n            if (error.response.status == 403) {\n                Vue.prototype.$message({\n                    message: '失败！该操作无权限',\n                    type: 'error'\n                });\n                return null;\n            }\n            // 429 ip限流\n            if (error.response.status == 429) {\n                Vue.prototype.$message({\n                    message: '刷新次数过多，请稍事休息重试！',\n                    type: 'error'\n                });\n                return null;\n            }\n        }\n        return \"\"; // 返回接口返回的错误信息\n    }\n);\n\n\nexport const BaseApiUrl =base;\n\n// 登录\nexport const requestLogin = params => {\n    return axios.get(`${base}/api/login/jwttoken3.0`, {params: params}).then(res => res.data);\n};\nexport const requestLoginMock = params => { return axios.post(`${base}/login`, params).then(res => res.data); };\n\nexport const refreshToken = params => {\n    return axios.get(`${base}/api/login/RefreshToken`, {params: params}).then(res => res.data);\n};\n\nexport const saveRefreshtime = params => {\n\n    let nowtime = new Date();\n    let lastRefreshtime = window.localStorage.refreshtime ? new Date(window.localStorage.refreshtime) : new Date(-1);\n    let expiretime = new Date(Date.parse(window.localStorage.TokenExpire))\n\n    let refreshCount=1;//滑动系数\n    if (lastRefreshtime >= nowtime) {\n        lastRefreshtime=nowtime>expiretime ? nowtime:expiretime;\n        lastRefreshtime.setMinutes(lastRefreshtime.getMinutes() + refreshCount);\n        window.localStorage.refreshtime = lastRefreshtime;\n    }else {\n        window.localStorage.refreshtime = new Date(-1);\n    }\n};\n const ToLogin = params => {\n     \n     store.commit(\"saveToken\", \"\");\n     store.commit(\"saveTokenExpire\", \"\");\n     store.commit(\"saveTagsData\", \"\");\n     window.localStorage.removeItem('user');\n     window.localStorage.removeItem('NavigationBar');\n\n     \n                \n    if (global.IS_IDS4) {\n        applicationUserManager.login();\n    } else {\n        router.replace({\n            path: \"/login\",\n            query: {redirect: router.currentRoute.fullPath}\n        });\n\n        window.location.reload()\n    }\n};\n\nexport const getUserByToken = params => {\n    return axios.get(`${base}/api/user/getInfoByToken`, {params: params}).then(res => res.data);\n};\n\n\nexport function testapi2() {\n    console.log('api is ok.')\n}\n\nexport const testapi = pa => {\n    console.log('api is ok.')\n}\n\n// 用户管理\nexport const getUserListPage = params => {\n    return axios.get(`${base}/api/user/get`, {params: params});\n};\nexport const removeUser = params => {\n    return axios.delete(`${base}/api/user/delete`, {params: params});\n};\nexport const editUser = params => {\n    return axios.put(`${base}/api/user/put`, params);\n};\nexport const addUser = params => {\n    return axios.post(`${base}/api/user/post`, params);\n};\nexport const batchRemoveUser = params => {\n    return axios.delete(`${base}/api/Claims/BatchDelete`, {params: params});//没做\n};\n\n// 角色管理\nexport const getRoleListPage = params => {\n    return axios.get(`${base}/api/role/get`, {params: params});\n};\nexport const removeRole = params => {\n    return axios.delete(`${base}/api/role/delete`, {params: params});\n};\nexport const editRole = params => {\n    return axios.put(`${base}/api/role/put`, params);\n};\nexport const addRole = params => {\n    return axios.post(`${base}/api/role/post`, params);\n};\n\n// 物料管理\nexport const getMaterialListPage = params => {\n    return axios.get(`${base}/api/Material/get`, {params: params});\n};\nexport const removeMaterial = params => {\n    return axios.delete(`${base}/api/Material/delete`, {params: params});\n};\nexport const editMaterial = params => {\n    return axios.put(`${base}/api/Material/put`, params);\n};\nexport const addMaterial = params => {\n    return axios.post(`${base}/api/Material/post`, params);\n};\n\n// 接口模块管理\nexport const getModuleListPage = params => {\n    return axios.get(`${base}/api/module/get`, {params: params});\n};\nexport const removeModule = params => {\n    return axios.delete(`${base}/api/module/delete`, {params: params});\n};\nexport const editModule = params => {\n    return axios.put(`${base}/api/module/put`, params);\n};\nexport const addModule = params => {\n    return axios.post(`${base}/api/module/post`, params);\n};\n\n//在制品查询\nexport const getWipHistoryPage=params=>{\n    return axios.get(`${base}/api/wip/get`, {params: params});\n};\n\n// 菜单模块管理\nexport const getPermissionListPage = params => {\n    return axios.get(`${base}/api/permission/get`, {params: params});\n};\nexport const getPermissionTreeTable = params => {\n    return axios.get(`${base}/api/permission/GetTreeTable`, {params: params});\n};\nexport const removePermission = params => {\n    return axios.delete(`${base}/api/permission/delete`, {params: params});\n};\nexport const editPermission = params => {\n    return axios.put(`${base}/api/permission/put`, params);\n};\nexport const addPermission = params => {\n    return axios.post(`${base}/api/permission/post`, params);\n};\nexport const getPermissionTree = params => {\n    return axios.get(`${base}/api/permission/getpermissiontree`, {params: params});\n};\nexport const getPermissionIds = params => {\n    return axios.get(`${base}/api/permission/GetPermissionIdByRoleId`, {params: params});\n};\n\nexport const addRolePermission = params => {\n    return axios.post(`${base}/api/permission/Assign`, params);\n};\nexport const getNavigationBar = params => {\n    return axios.get(`${base}/api/permission/GetNavigationBar`, {params: params}).then(res => res.data);\n};\n\n// Bug模块管理\nexport const getBugListPage = params => {\n    return axios.get(`${base}/api/TopicDetail/get`, {params: params});\n};\nexport const removeBug = params => {\n    return axios.delete(`${base}/api/TopicDetail/delete`, {params: params});\n};\nexport const editBug = params => {\n    return axios.put(`${base}/api/TopicDetail/update`, params);\n};\nexport const addBug = params => {\n    return axios.post(`${base}/api/TopicDetail/post`, params);\n};\n\n\n// 博客模块管理\nexport const getBlogListPage = params => {\n    return axios.get(`${base}/api/Blog`, {params: params});\n};\nexport const getBlogDeatil = params => {\n    return axios.get(`${base}/api/Blog/DetailNuxtNoPer`, {params: params});\n};\nexport const editBlog = params => {\n    return axios.put(`${base}/api/Blog/update`, params);\n};\nexport const removeBlog = params => {\n    return axios.delete(`${base}/api/Blog/delete`, {params: params});\n};\n\n// 日志\nexport const getLogs = params => {\n    return axios.get(`${base}/api/Monitor/get`, {params: params});\n};\nexport const getRequestApiinfoByWeek = params => {\n    return axios.get(`${base}/api/Monitor/GetRequestApiinfoByWeek`, {params: params});\n};\nexport const getAccessApiByDate = params => {\n    return axios.get(`${base}/api/Monitor/GetAccessApiByDate`, {params: params});\n};\nexport const getAccessApiByHour = params => {\n    return axios.get(`${base}/api/Monitor/GetAccessApiByHour`, {params: params});\n};\nexport const getServerInfo = params => {\n    return axios.get(`${base}/api/Monitor/Server`, {params: params});\n};\nexport const getAccessLogs = params => {\n    return axios.get(`${base}/api/Monitor/GetAccessLogs`, {params: params});\n};\nexport const getIds4UsersGrow = params => {\n    return axios.get(`${base}/api/Monitor/GetIds4Users`, {params: params});\n};\nexport const getActiveUsers = params => {\n    return axios.get(`${base}/api/Monitor/GetActiveUsers`, {params: params});\n};\n\n\n// Task管理\nexport const getTaskListPage = params => {\n    return axios.get(`${base}/api/TasksQz/get`, {params: params});\n};\nexport const removeTask = params => {\n    return axios.delete(`${base}/api/TasksQz/delete`, {params: params});\n};\nexport const editTask = params => {\n    return axios.put(`${base}/api/TasksQz/put`, params);\n};\nexport const addTask = params => {\n    return axios.post(`${base}/api/TasksQz/post`, params);\n};\n\nexport const startJob = params => {\n    return axios.get(`${base}/api/TasksQz/StartJob`, {params: params});\n};\nexport const stopJob = params => {\n    return axios.get(`${base}/api/TasksQz/StopJob`, {params: params});\n};\nexport const reCovery = params => {\n    return axios.get(`${base}/api/TasksQz/ReCovery`, {params: params});\n};\n\n// ids4\nexport const getAchieveUsers_IS4 = params => {\n    return axios.get(`${base}/is4api/GetAchieveUsers`, {params: params});\n};"]}]}