{"remainingRequest":"C:\\框架\\Blog.Admin-master\\node_modules\\thread-loader\\dist\\cjs.js!C:\\框架\\Blog.Admin-master\\node_modules\\babel-loader\\lib\\index.js!C:\\框架\\Blog.Admin-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\框架\\Blog.Admin-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\框架\\Blog.Admin-master\\src\\views\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\框架\\Blog.Admin-master\\src\\views\\Login.vue","mtime":1610332596000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\框架\\Blog.Admin-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport _JSON$stringify from \"C:\\\\\\u6846\\u67B6\\\\Blog.Admin-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/json/stringify\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { requestLogin, requestLoginMock, getUserByToken, getNavigationBar } from '../api/api';\nimport router from '@/router';\nimport { resetRouter, filterAsyncRouter } from '@/router/index';\nexport default {\n  data: function data() {\n    return {\n      instance: \"\",\n      loginStr: '登录',\n      logining: false,\n      loginingMock: false,\n      ruleForm2: {\n        account: 'test',\n        checkPass: 'test'\n      },\n      account3: '测试账号1',\n      rules2: {\n        account: [{\n          required: true,\n          message: '请输入账号',\n          trigger: 'blur'\n        }],\n        checkPass: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      },\n      checked: true\n    };\n  },\n  methods: {\n    handleReset2: function handleReset2() {\n      this.$refs.ruleForm2.resetFields();\n    },\n    loginAccount: function loginAccount() {\n      if (this.account3 == \"测试账号1\") {\n        this.ruleForm2.account = \"test\";\n        this.ruleForm2.checkPass = \"test\";\n      } else if (this.account3 == \"测试账号2\") {\n        this.ruleForm2.account = \"test2\";\n        this.ruleForm2.checkPass = \"test2\";\n      } else {\n        this.ruleForm2.account = \"blogadmin\";\n        this.ruleForm2.checkPass = \"blogadmin\";\n      }\n    },\n    //这个是用来测试 mock 的，很简单，只需要在 main.js 中开启服务即可\n    handleSubmitMock: function handleSubmitMock(ev) {\n      var _this2 = this;\n\n      var _this = this;\n\n      this.$refs.ruleForm2.validate(function (valid) {\n        if (valid) {\n          //_this.$router.replace('/table');\n          _this2.loginingMock = true; //NProgress.start();\n\n          var loginParams = {\n            username: _this2.ruleForm2.account,\n            password: _this2.ruleForm2.checkPass\n          };\n          requestLoginMock(loginParams).then(function (data) {\n            _this2.loginingMock = false;\n\n            if (data && data.code && data.msg) {\n              _this.$message({\n                message: data.code + data.msg + \"，用户名admin,密码123456\",\n                type: 'error'\n              });\n            } else {\n              _this.$message({\n                message: \"测试mock，请在main.js 中开启服务!\",\n                type: 'error'\n              });\n\n              console.info('%c 测试mock，请在main.js 中开启服务!', \"color:red\");\n            }\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    openAlert: function openAlert(msg) {\n      this.instance = this.$notify({\n        title: '提示',\n        message: msg,\n        duration: 0,\n        position: 'top-left'\n      });\n    },\n    closeAlert: function closeAlert() {\n      this.instance.close();\n    },\n    // 获取 Token\n    handleSubmit2: function handleSubmit2(ev) {\n      var _this3 = this;\n\n      var _this = this;\n\n      this.$refs.ruleForm2.validate(function (valid) {\n        if (valid) {\n          //_this.$router.replace('/table');\n          _this3.logining = true; //NProgress.start();\n\n          var loginParams = {\n            name: _this3.ruleForm2.account,\n            pass: _this3.ruleForm2.checkPass\n          }; // _this.openAlert(\"登录中...\")\n\n          _this.loginStr = \"登录中...\";\n          requestLogin(loginParams).then(function (data) {\n            if (!data.success) {\n              _this.$message({\n                message: data.msg,\n                type: 'error'\n              });\n\n              _this.logining = false;\n              _this.loginStr = \"重新登录\"; // _this.closeAlert()\n            } else {\n              var token = data.response.token;\n\n              _this.$store.commit(\"saveToken\", token);\n\n              var curTime = new Date();\n              var expiredate = new Date(curTime.setSeconds(curTime.getSeconds() + data.response.expires_in));\n\n              _this.$store.commit(\"saveTokenExpire\", expiredate);\n\n              window.localStorage.refreshtime = expiredate;\n              window.localStorage.expires_in = data.response.expires_in;\n\n              _this.$notify({\n                type: \"success\",\n                message: \"\\u6210\\u529F\\u83B7\\u53D6\\u4EE4\\u724C\\uFF0C\\u9879\\u76EE\\u521D\\u59CB\\u5316\\u4E2D...\",\n                duration: 3000\n              }); // _this.closeAlert()\n              // _this.openAlert(\"成功获取Token，等待服务器返回用户信息...\")\n\n\n              _this.loginStr = \"成功获取Token，等待服务器返回用户信息...\";\n\n              _this.getUserInfoByToken(token);\n            }\n          });\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    // 获取用户数据\n    getUserInfoByToken: function getUserInfoByToken(token) {\n      var _this = this;\n\n      var loginParams = {\n        token: token\n      };\n      getUserByToken(loginParams).then(function (data) {\n        if (!data.success) {\n          _this.$message({\n            message: data.msg,\n            type: 'error'\n          });\n        } else {\n          // _this.closeAlert()\n          // _this.openAlert(\"接收到用户数据，开始初始化路由树...\")\n          _this.loginStr = \"接收到用户数据，开始初始化路由树...\";\n          window.localStorage.user = _JSON$stringify(data.response);\n\n          if (data.response.uID > 0) {\n            _this.GetNavigationBar(data.response.uID);\n          }\n        }\n      });\n    },\n    // 获取路由树\n    GetNavigationBar: function GetNavigationBar(uid) {\n      var _this = this;\n\n      var loginParams = {\n        uid: uid,\n        t: new Date()\n      };\n      getNavigationBar(loginParams).then(function (data) {\n        _this.logining = false;\n\n        if (!data.success) {\n          _this.$message({\n            message: data.msg,\n            type: 'error'\n          });\n        } else {\n          // _this.closeAlert()\n          _this.$message({\n            message: \"后台初始化成功\",\n            type: 'success'\n          });\n\n          var userinfo = JSON.parse(window.localStorage.user ? window.localStorage.user : null);\n\n          _this.$notify({\n            type: \"success\",\n            message: \"\\u767B\\u5F55\\u6210\\u529F \\n \\u6B22\\u8FCE\\u7BA1\\u7406\\u5458\\uFF1A\".concat(userinfo.uRealName, \" \\uFF01Token \\u5C06\\u5728 \").concat(window.localStorage.expires_in / 60, \" \\u5206\\u949F\\u540E\\u8FC7\\u671F\\uFF01\"),\n            duration: 6000\n          });\n\n          window.localStorage.router = _JSON$stringify(data.response.children);\n          var getRouter = data.response.children; //后台拿到路由\n\n          getRouter = filterAsyncRouter(getRouter); //过滤路由\n\n          router.$addRoutes(getRouter); //动态添加路由\n\n          _this.$router.replace(_this.$route.query.redirect ? _this.$route.query.redirect : \"/\");\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    // window.localStorage.clear()\n    console.info('%c 本地缓存已清空!', \"color:green\");\n  }\n};",{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"wrapper\">\n        <ul class=\"bg-bubbles\">\n            <li v-for=\"n in 10\" :key=\"n+'n'\"></li>\n            <ol v-for=\"m in 5\"  :key=\"m+'m'\"></ol>\n        </ul>\n        <div class=\"bg bg-blur\" style=\"display: none;\"></div>\n        <div style=\"height: 10%;\"></div>\n        <el-form :model=\"ruleForm2\" :rules=\"rules2\" ref=\"ruleForm2\" label-position=\"left\" label-width=\"0px\"\n                 class=\"demo-ruleForm login-container\">\n            <h3 class=\"title\">系统登录</h3>\n            <el-form-item prop=\"account\">\n                <el-input type=\"text\" v-model=\"ruleForm2.account\" auto-complete=\"off\" placeholder=\"账号\"></el-input>\n            </el-form-item>\n            <el-form-item prop=\"checkPass\">\n                <el-input v-model=\"ruleForm2.checkPass\" auto-complete=\"off\" show-password placeholder=\"密码\"></el-input>\n            </el-form-item>\n            <el-checkbox v-model=\"checked\" checked class=\"remember\">记住密码</el-checkbox>\n\n            <div style=\"margin-bottom: 20px;\" class=\"count-test\">\n                <el-radio-group @change=\"loginAccount\" v-model=\"account3\">\n                    <el-radio-button label=\"测试账号1\"></el-radio-button>\n                    <el-radio-button label=\"测试账号2\"></el-radio-button>\n                    <el-radio-button label=\"超级管理员\"></el-radio-button>\n                </el-radio-group>\n            </div>\n            <el-form-item style=\"width:100%;\">\n                <el-button type=\"primary\" style=\"width:100%;\" @click.native.prevent=\"handleSubmit2\" :loading=\"logining\">\n                    {{loginStr}}\n                </el-button>\n\n            </el-form-item>\n            <el-form-item style=\"width:100%;\">\n\n                <el-button :loading=\"loginingMock\" style=\"width:100%;\" @click.native.prevent=\"handleSubmitMock\">Mock登录\n                </el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\n    import {requestLogin, requestLoginMock, getUserByToken, getNavigationBar} from '../api/api';\n\n    import router from '@/router'\n    import {resetRouter, filterAsyncRouter} from '@/router/index'\n\n    export default {\n        data() {\n            return {\n                instance: \"\",\n                loginStr: '登录',\n                logining: false,\n                loginingMock: false,\n                ruleForm2: {\n                    account: 'test',\n                    checkPass: 'test'\n                },\n                account3: '测试账号1',\n                rules2: {\n                    account: [\n                        {required: true, message: '请输入账号', trigger: 'blur'},\n                        //{ validator: validaePass }\n                    ],\n                    checkPass: [\n                        {required: true, message: '请输入密码', trigger: 'blur'},\n                        //{ validator: validaePass2 }\n                    ]\n                },\n                checked: true\n            };\n        },\n        methods: {\n            handleReset2() {\n                this.$refs.ruleForm2.resetFields();\n            },\n            loginAccount() {\n\n                if (this.account3 == \"测试账号1\") {\n                    this.ruleForm2.account = \"test\";\n                    this.ruleForm2.checkPass = \"test\";\n                } else if (this.account3 == \"测试账号2\") {\n                    this.ruleForm2.account = \"test2\";\n                    this.ruleForm2.checkPass = \"test2\";\n                } else {\n                    this.ruleForm2.account = \"blogadmin\";\n                    this.ruleForm2.checkPass = \"blogadmin\";\n                }\n            },\n            //这个是用来测试 mock 的，很简单，只需要在 main.js 中开启服务即可\n            handleSubmitMock(ev) {\n                var _this = this;\n                this.$refs.ruleForm2.validate((valid) => {\n                    if (valid) {\n                        //_this.$router.replace('/table');\n                        this.loginingMock = true;\n                        //NProgress.start();\n                        var loginParams = {username: this.ruleForm2.account, password: this.ruleForm2.checkPass};\n\n                        requestLoginMock(loginParams).then(data => {\n                            this.loginingMock = false;\n\n                            if (data && data.code && data.msg) {\n                                _this.$message({\n                                    message: data.code + data.msg + \"，用户名admin,密码123456\",\n                                    type: 'error'\n                                });\n                            } else {\n\n                                _this.$message({\n                                    message: \"测试mock，请在main.js 中开启服务!\",\n                                    type: 'error'\n                                });\n                                console.info('%c 测试mock，请在main.js 中开启服务!', \"color:red\")\n                            }\n\n                        });\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            openAlert(msg) {\n                this.instance = this.$notify({\n                    title: '提示',\n                    message: msg,\n                    duration: 0,\n                    position: 'top-left'\n                });\n            },\n            closeAlert() {\n                this.instance.close()\n            },\n            // 获取 Token\n            handleSubmit2(ev) {\n                var _this = this;\n                this.$refs.ruleForm2.validate((valid) => {\n                    if (valid) {\n                        //_this.$router.replace('/table');\n                        this.logining = true;\n\n                        //NProgress.start();\n                        var loginParams = {name: this.ruleForm2.account, pass: this.ruleForm2.checkPass};\n\n\n                        // _this.openAlert(\"登录中...\")\n\n                        _this.loginStr = \"登录中...\";\n\n                        requestLogin(loginParams).then(data => {\n                            if (!data.success) {\n                                _this.$message({\n                                    message: data.msg,\n                                    type: 'error'\n                                });\n                                _this.logining = false;\n                                _this.loginStr = \"重新登录\";\n                                // _this.closeAlert()\n                            } else {\n\n                                var token = data.response.token;\n                                _this.$store.commit(\"saveToken\", token);\n\n                                var curTime = new Date();\n                                var expiredate = new Date(curTime.setSeconds(curTime.getSeconds() + data.response.expires_in));\n                                _this.$store.commit(\"saveTokenExpire\", expiredate);\n\n                                window.localStorage.refreshtime = expiredate;\n                                window.localStorage.expires_in = data.response.expires_in;\n\n                                _this.$notify({\n                                    type: \"success\",\n                                    message: `成功获取令牌，项目初始化中...`,\n                                    duration: 3000\n                                });\n\n\n                                // _this.closeAlert()\n                                // _this.openAlert(\"成功获取Token，等待服务器返回用户信息...\")\n                                _this.loginStr = \"成功获取Token，等待服务器返回用户信息...\";\n\n                                _this.getUserInfoByToken(token)\n\n\n                            }\n                        });\n                    } else {\n                        console.log('error submit!!');\n                        return false;\n                    }\n                });\n            },\n            // 获取用户数据\n            getUserInfoByToken(token) {\n                var _this = this;\n                var loginParams = {token: token};\n                getUserByToken(loginParams).then(data => {\n\n                    if (!data.success) {\n                        _this.$message({\n                            message: data.msg,\n                            type: 'error'\n                        });\n                    } else {\n                        // _this.closeAlert()\n                        // _this.openAlert(\"接收到用户数据，开始初始化路由树...\")\n                        _this.loginStr = \"接收到用户数据，开始初始化路由树...\";\n\n\n                        window.localStorage.user = JSON.stringify(data.response)\n                        if (data.response.uID > 0) {\n                            _this.GetNavigationBar(data.response.uID)\n                        }\n                    }\n                });\n            },\n            // 获取路由树\n            GetNavigationBar(uid) {\n                var _this = this;\n                var loginParams = {uid: uid, t: new Date()};\n\n                getNavigationBar(loginParams).then(data => {\n                    _this.logining = false;\n\n\n                    if (!data.success) {\n                        _this.$message({\n                            message: data.msg,\n                            type: 'error'\n                        });\n                    } else {\n\n                        // _this.closeAlert()\n\n                        _this.$message({\n                            message: \"后台初始化成功\",\n                            type: 'success'\n                        });\n\n\n                        let userinfo = JSON.parse(window.localStorage.user ? window.localStorage.user : null);\n                        _this.$notify({\n                            type: \"success\",\n                            message: `登录成功 \\n 欢迎管理员：${userinfo.uRealName} ！Token 将在 ${window.localStorage.expires_in / 60} 分钟后过期！`,\n                            duration: 6000\n                        });\n\n\n                        window.localStorage.router = (JSON.stringify(data.response.children));\n\n                        let getRouter = data.response.children//后台拿到路由\n                        getRouter = filterAsyncRouter(getRouter) //过滤路由\n                        router.$addRoutes(getRouter) //动态添加路由\n\n                        _this.$router.replace(_this.$route.query.redirect ? _this.$route.query.redirect : \"/\");\n                    }\n                });\n            }\n        },\n        mounted() {\n            // window.localStorage.clear()\n            console.info('%c 本地缓存已清空!', \"color:green\")\n\n        },\n    }\n\n</script>\n\n<style>\n    .bg {\n        margin: 0px;\n        position: absolute;\n        left: 0;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        background: url(../assets/loginbck.png) no-repeat top left;\n        background-repeat: no-repeat;\n        background-size: cover;\n        width: 100%;\n        height: 100%;\n    }\n\n    .login-container {\n        -webkit-border-radius: 5px;\n        border-radius: 5px;\n        -moz-border-radius: 5px;\n        background-clip: padding-box;\n        margin: auto;\n        width: 350px;\n        padding: 35px 35px 15px 35px;\n        background: #fff;\n        border: 1px solid #eaeaea;\n        box-shadow: 0 0 25px #cac6c6;\n        z-index: 9999;\n        position: relative;\n    }\n\n    .login-container .title {\n        margin: 0px auto 40px auto;\n        text-align: center;\n        color: #505458;\n    }\n\n    .login-container .remember {\n        margin: 0px 0px 25px 0px;\n    }\n    \n    .wrapper {\n        background: #50a3a2;\n        background: -webkit-linear-gradient(top left, #50a3a2 0%, #53e3a6 100%);\n        background: linear-gradient(to bottom right, #127c7b 0, #50a3a2);\n        opacity: 0.8;\n        position: absolute;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n\n    .wrapper.form-success .containerLogin h1 {\n        -webkit-transform: translateY(85px);\n        -ms-transform: translateY(85px);\n        transform: translateY(85px);\n    }\n\n    .containerLogin {\n        max-width: 600px;\n        margin: 0 auto;\n        padding: 80px 0;\n        height: 400px;\n        text-align: center;\n    }\n\n    .containerLogin h1 {\n        font-size: 40px;\n        -webkit-transition-duration: 1s;\n        transition-duration: 1s;\n        -webkit-transition-timing-function: ease-in-put;\n        transition-timing-function: ease-in-put;\n        font-weight: 200;\n    }\n\n    .bg-bubbles {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 1;\n    }\n\n    .bg-bubbles li, .bg-bubbles ol {\n        position: absolute;\n        list-style: none;\n        display: block;\n        width: 40px;\n        height: 40px;\n        background-color: rgba(255, 255, 255, 0.15);\n        bottom: -160px;\n        -webkit-animation: square 25s infinite;\n        animation: square 25s infinite;\n        -webkit-transition-timing-function: linear;\n        transition-timing-function: linear;\n    }\n\n    ol {\n        padding: 0 !important;\n    }\n\n    .bg-bubbles ol:nth-child(11) {\n        left: 10%;\n        top: 10%;\n        width: 20px;\n        height: 20px;\n    }\n\n    .bg-bubbles ol:nth-child(12) {\n        left: 20%;\n        top: 40%;\n\n        width: 60px;\n        height: 60px;\n    }\n\n    .bg-bubbles ol:nth-child(13) {\n        left: 65%;\n        top: 30%;\n\n        width: 100px;\n        height: 60px;\n    }\n\n    .bg-bubbles ol:nth-child(14) {\n        left: 70%;\n        top: 30%;\n        width: 100px;\n        height: 150px;\n    }\n\n    .bg-bubbles ol:nth-child(15) {\n        left: 50%;\n        top: 70%;\n\n        width: 40px;\n        height: 60px;\n    }\n\n    .bg-bubbles li:nth-child(1) {\n        left: 10%;\n    }\n\n    .bg-bubbles li:nth-child(2) {\n        left: 20%;\n        width: 80px;\n        height: 80px;\n        -webkit-animation-delay: 2s;\n        animation-delay: 2s;\n        -webkit-animation-duration: 17s;\n        animation-duration: 17s;\n    }\n\n    .bg-bubbles li:nth-child(3) {\n        left: 25%;\n        -webkit-animation-delay: 4s;\n        animation-delay: 4s;\n    }\n\n    .bg-bubbles li:nth-child(4) {\n        left: 40%;\n        width: 60px;\n        height: 60px;\n        -webkit-animation-duration: 22s;\n        animation-duration: 22s;\n        background-color: rgba(255, 255, 255, 0.25);\n    }\n\n    .bg-bubbles li:nth-child(5) {\n        left: 70%;\n    }\n\n    .bg-bubbles li:nth-child(6) {\n        left: 80%;\n        width: 120px;\n        height: 120px;\n        -webkit-animation-delay: 3s;\n        animation-delay: 3s;\n        background-color: rgba(255, 255, 255, 0.2);\n    }\n\n    .bg-bubbles li:nth-child(7) {\n        left: 32%;\n        width: 160px;\n        height: 160px;\n        -webkit-animation-delay: 7s;\n        animation-delay: 7s;\n    }\n\n    .bg-bubbles li:nth-child(8) {\n        left: 55%;\n        width: 20px;\n        height: 20px;\n        -webkit-animation-delay: 15s;\n        animation-delay: 15s;\n        -webkit-animation-duration: 40s;\n        animation-duration: 40s;\n    }\n\n    .bg-bubbles li:nth-child(9) {\n        left: 25%;\n        width: 10px;\n        height: 10px;\n        -webkit-animation-delay: 2s;\n        animation-delay: 2s;\n        -webkit-animation-duration: 40s;\n        animation-duration: 40s;\n        background-color: rgba(255, 255, 255, 0.3);\n    }\n\n    .bg-bubbles li:nth-child(10) {\n        left: 90%;\n        width: 160px;\n        height: 160px;\n        -webkit-animation-delay: 11s;\n        animation-delay: 11s;\n    }\n\n    @-webkit-keyframes square {\n        0% {\n            -webkit-transform: translateY(0);\n            transform: translateY(0);\n        }\n\n        100% {\n            -webkit-transform: translateY(-700px) rotate(600deg);\n            transform: translateY(-700px) rotate(600deg);\n        }\n    }\n\n    @keyframes square {\n        0% {\n            -webkit-transform: translateY(0);\n            transform: translateY(0);\n        }\n\n        100% {\n            -webkit-transform: translateY(-700px) rotate(600deg);\n            transform: translateY(-700px) rotate(600deg);\n        }\n    }\n\n    .content-az {\n        padding: 0 !important;\n        border: none !important;\n    }\n</style>\n"],"sourceRoot":"src\\views"}]}