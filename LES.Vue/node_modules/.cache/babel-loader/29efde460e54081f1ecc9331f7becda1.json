{"remainingRequest":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\thread-loader\\dist\\cjs.js!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\babel-loader\\lib\\index.js!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\src\\views\\Logs\\Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\src\\views\\Logs\\Index.vue","mtime":1610332596000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\数瀛信息科技\\公司项目\\广州西门子原材料立体库\\低压线圈\\src\\LES.Vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport util from '../../../util/date';\nimport { getLogs, BaseApiUrl } from '../../api/api';\nimport * as signalR from \"@aspnet/signalr\";\nexport default {\n  data: function data() {\n    return {\n      filters: {\n        LinkUrl: ''\n      },\n      listLoading: true,\n      tableData: [],\n      userName: \"Tom\",\n      userMessage: \"123\",\n      connection: \"\",\n      messages: [],\n      t: \"\"\n    };\n  },\n  methods: {\n    //性别显示转换\n    formattdDetail: function formattdDetail(row, column) {\n      return row.tdDetail ? row.tdDetail.substring(0, 20) : \"N/A\";\n    },\n    formatCreateTime: function formatCreateTime(row, column) {\n      return !row.tdCreatetime || row.tdCreatetime == '' ? '' : util.formatDate.format(new Date(row.tdCreatetime), 'yyyy-MM-dd');\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page = val;\n      this.getRoles();\n    },\n    //获取用户列表\n    getRoles: function getRoles() {\n      var thisvue = this;\n      var para = {\n        page: this.page,\n        key: this.filters.LinkUrl\n      };\n      this.listLoading = true;\n      getLogs(para).then(function (res) {\n        // this.tableData = res.data.response;\n        thisvue.connection.start().then(function () {\n          thisvue.connection.invoke('GetLatestCount', 1).catch(function (err) {\n            return console.error(err);\n          }); // transactionConnection.invoke('JoinGroup', 'ClientAccountTransaction').catch(err => console.error(err.toString()));\n        });\n      });\n    },\n    submitCard: function submitCard() {\n      if (this.userName && this.userMessage) {\n        this.connection.invoke('SendMessage', this.userName, this.userMessage).catch(function (err) {\n          return console.error(err);\n        });\n      }\n    },\n    getLogs: function getLogs() {\n      this.listLoading = true;\n      this.connection.invoke('GetLatestCount', 1).catch(function (err) {\n        return console.error(err);\n      });\n    }\n  },\n  created: function created() {\n    var thisVue = this;\n    thisVue.connection = new signalR.HubConnectionBuilder().withUrl(\"\".concat(BaseApiUrl, \"/api2/chatHub\")).configureLogging(signalR.LogLevel.Information).build();\n    thisVue.connection.on('ReceiveMessage', function (user, message) {\n      thisVue.messages.push({\n        user: user,\n        message: message\n      });\n    });\n    thisVue.connection.on('ReceiveUpdate', function (update) {\n      console.info('update success!');\n      thisVue.listLoading = false;\n      thisVue.tableData = update;\n      window.clearInterval(this.t);\n    });\n  },\n  mounted: function mounted() {\n    this.getRoles(); //  this.t =  setTimeout(() => {\n    //      this.getLogs();\n    // }, 1000);\n  },\n  beforeDestroy: function beforeDestroy() {\n    window.clearInterval(this.t);\n    this.connection.stop();\n  }\n};",{"version":3,"sources":["Index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <section>\n        <div style=\"display: none1\">\n            <el-form ref=\"form\" label-width=\"80px\" @submit.prevent=\"onSubmit\"\n                     style=\"margin:20px;width:60%;min-width:600px;\">\n                <el-form-item label=\"用户名\">\n                    <el-input v-model=\"userName\"></el-input>\n                </el-form-item>\n\n                <el-form-item label=\"密码\">\n                    <el-input v-model=\"userMessage\"></el-input>\n                </el-form-item>\n            </el-form>\n            <ul v-for=\"(item, index) in messages\" v-bind:key=\"index + 'itemMessage'\">\n                <li><b>Name: </b>{{item.user}}</li>\n                <li><b>Message: </b>{{item.message}}</li>\n            </ul>\n            <el-button type=\"primary\" @click=\"submitCard\">登录</el-button>\n\n            <el-button type=\"primary\" @click=\"getLogs\">查询</el-button>\n        </div>\n\n\n        <el-table\n                :data=\"tableData\"\n                v-loading=\"listLoading\"\n                style=\"width: 100%\">\n            <el-table-column type=\"expand\">\n                <template slot-scope=\"props\">\n                    <el-form label-position=\"left\" inline class=\"demo-table-expand\">\n                        <el-form-item label=\"Datetime\">\n                            <span>{{ props.row.datetime }}</span>\n                        </el-form-item>\n                        <el-form-item label=\"Content\">\n                            <span v-html=\"props.row.content\"></span>\n                        </el-form-item>\n                    </el-form>\n                </template>\n            </el-table-column>\n            <el-table-column\n                    label=\"Datetime\"\n                    prop=\"datetime\">\n            </el-table-column>\n            <el-table-column\n                    label=\"Content\">\n                <template scope=\"scope\">\n                    <span :class=\"scope.row.logColor\"\n                          v-html=\"scope.row.content\"></span>\n                </template>\n            </el-table-column>\n            <!--<el-table-column-->\n                    <!--label=\"IP\"-->\n                    <!--prop=\"ip\">-->\n            <!--</el-table-column>-->\n        </el-table>\n    </section>\n</template>\n\n<script>\n    import util from '../../../util/date'\n    import {getLogs,BaseApiUrl} from '../../api/api';\n    import * as signalR from \"@aspnet/signalr\";\n\n    export default {\n        data() {\n            return {\n                filters: {\n                    LinkUrl: ''\n                },\n                listLoading: true,\n                tableData: [],\n                userName: \"Tom\",\n                userMessage: \"123\",\n                connection: \"\",\n                messages: [],\n                t: \"\"\n\n            }\n        },\n        methods: {\n            //性别显示转换\n            formattdDetail: function (row, column) {\n                return row.tdDetail ? row.tdDetail.substring(0, 20) : \"N/A\";\n            },\n            formatCreateTime: function (row, column) {\n                return (!row.tdCreatetime || row.tdCreatetime == '') ? '' : util.formatDate.format(new Date(row.tdCreatetime), 'yyyy-MM-dd');\n            },\n            handleCurrentChange(val) {\n                this.page = val;\n                this.getRoles();\n            },\n            //获取用户列表\n            getRoles() {\n                let thisvue=this;\n                let para = {\n                    page: this.page,\n                    key: this.filters.LinkUrl\n                };\n                this.listLoading = true;\n\n                getLogs(para).then((res) => {\n                    // this.tableData = res.data.response;\n                    thisvue.connection.start().then(() => {\n\n                        thisvue.connection.invoke('GetLatestCount', 1).catch(function (err) {\n                            return console.error(err);\n                        });\n\n                        // transactionConnection.invoke('JoinGroup', 'ClientAccountTransaction').catch(err => console.error(err.toString()));\n\n                    });\n\n\n                });\n            },\n            submitCard: function () {\n                if (this.userName && this.userMessage) {\n                    this.connection.invoke('SendMessage', this.userName, this.userMessage).catch(function (err) {\n                        return console.error(err);\n                    });\n\n                }\n            },\n            getLogs: function () {\n                this.listLoading = true;\n                this.connection.invoke('GetLatestCount', 1).catch(function (err) {\n                    return console.error(err);\n                });\n\n            }\n\n        },\n        created: function () {\n            let thisVue = this;\n\n            thisVue.connection = new signalR.HubConnectionBuilder()\n                .withUrl(`${BaseApiUrl}/api2/chatHub`)\n                .configureLogging(signalR.LogLevel.Information)\n                .build();\n\n\n\n            thisVue.connection.on('ReceiveMessage', function (user, message) {\n                thisVue.messages.push({user, message});\n            });\n\n            thisVue.connection.on('ReceiveUpdate', function (update) {\n                console.info('update success!')\n                thisVue.listLoading = false;\n                thisVue.tableData = update;\n                window.clearInterval(this.t)\n            })\n        },\n        mounted() {\n            this.getRoles();\n\n            //  this.t =  setTimeout(() => {\n            //      this.getLogs();\n            // }, 1000);\n\n        },\n        beforeDestroy() {\n            window.clearInterval(this.t)\n            this.connection.stop();\n        }\n    }\n\n</script>\n\n<style scoped>\n    .demo-table-expand {\n        font-size: 0;\n    }\n\n    .demo-table-expand label {\n        width: 90px;\n        color: #99a9bf;\n    }\n\n    .demo-table-expand .el-form-item {\n        margin-right: 0;\n        margin-bottom: 0;\n        width: 30%;\n    }\n\n    .EXC {\n        color: red;\n    }\n</style>\n"],"sourceRoot":"src\\views\\Logs"}]}